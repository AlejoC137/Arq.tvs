import{c as A,u as S,r as t,g as C,j as e,X as L,a as D,S as I}from"./index-cawTiIuy.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=A("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),M=["Sala","Comedor","Cocina","Baño Principal","Baño Social","Dormitorio 1","Dormitorio 2","Dormitorio 3","Terraza","Balcón","Garaje","Patio","Estudio","Zona de Ropas"],R=["En Progreso","En Diseño","Pendiente","Activo","Completado","Pausado","Cancelado","Archivado"],T=({proyecto:r,onClose:g,onProjectUpdated:d})=>{const l=S(),[c,i]=t.useState(""),[m,u]=t.useState(""),[n,h]=t.useState(""),[b,a]=t.useState([]),[f,p]=t.useState([]),[x,v]=t.useState(!1),[w,j]=t.useState(null);t.useEffect(()=>{l(C("Personal")).then(s=>{if(s!=null&&s.payload){const o=s.payload.sort((N,E)=>(N.name||"").localeCompare(E.name||""));p(o)}else console.warn("No se pudo cargar la lista de personal para el dropdown.")}).catch(s=>{console.error("Error al cargar personal:",s)})},[l]),t.useEffect(()=>{r&&(i(r.name||""),u(r.status||""),h(r.resp||""),a(Array.isArray(r.espacios)?r.espacios:[]),j(null))},[r]);const k=s=>{a(o=>o.includes(s)?o.filter(N=>N!==s):[...o,s])},P=()=>{v(!0),j(null);const s={name:c,status:m,resp:n||null,espacios:b};l(D(r.id,s)).then(o=>{o&&o.payload?d(o.payload):d({...r,...s})}).catch(o=>{console.error("Error al guardar la configuración:",o),j("No se pudo guardar. Inténtalo de nuevo.")}).finally(()=>{v(!1)})},y=()=>{x||g()};return r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:y,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg m-4",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Configurar: ",e.jsx("span",{className:"font-bold text-blue-600",children:r.name})]}),e.jsx("button",{onClick:y,className:"p-1 rounded-full text-gray-400 hover:bg-gray-200 hover:text-gray-600",disabled:x,children:e.jsx(L,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"projectName",className:"block text-sm font-medium text-gray-700",children:"Nombre del Proyecto"}),e.jsx("input",{type:"text",id:"projectName",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:c,onChange:s=>i(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectStatus",className:"block text-sm font-medium text-gray-700",children:"Estado"}),e.jsxs("select",{id:"projectStatus",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:m,onChange:s=>u(s.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar estado..."}),R.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectResp",className:"block text-sm font-medium text-gray-700",children:"Responsable"}),e.jsxs("select",{id:"projectResp",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:n,onChange:s=>h(s.target.value),children:[e.jsx("option",{value:"",children:"Sin asignar"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name||s.email||s.id},s.id))]})]})]}),e.jsx("hr",{className:"mb-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Seleccionar Espacios"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Marca los espacios que aplican a este proyecto. Se guardará como una lista de textos."}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:M.map(s=>e.jsxs("label",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-gray-50 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:b.includes(s),onChange:()=>k(s)}),e.jsx("span",{className:"text-gray-700",children:s})]},s))})]})]}),e.jsxs("div",{className:"flex justify-end items-center gap-4 p-5 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:[w&&e.jsx("p",{className:"text-sm text-red-600 mr-auto",children:w}),e.jsx("button",{onClick:y,disabled:x,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:P,disabled:x,className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-white font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Guardando...":"Guardar Cambios"})]})]})}):null},G=()=>{const r=S(),[g,d]=t.useState([]),[l,c]=t.useState(!0),[i,m]=t.useState(null),[u,n]=t.useState(null);t.useEffect(()=>{c(!0),m(null),r(C("Proyectos")).then(a=>{if(a!=null&&a.payload)d(a.payload);else throw new Error("No se recibieron datos válidos.")}).catch(a=>{console.error("Error al obtener proyectos:",a),m("No se pudieron cargar los proyectos.")}).finally(()=>{c(!1)})},[r]);const h=a=>{d(f=>f.map(p=>p.id===a.id?a:p)),n(null)},b=()=>{n(null)};return l?e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 bg-gray-50 min-h-screen",children:[e.jsxs("header",{className:"mb-8 max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Seleccionar Proyecto"}),e.jsx("p",{className:"text-md text-gray-600 mt-1",children:"Elige un proyecto para ver el detalle de sus tareas."})]}),e.jsx("div",{className:"max-w-7xl mx-auto text-center text-gray-500 py-16",children:"Cargando proyectos..."})]}):i?e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 bg-gray-50 min-h-screen",children:[e.jsx("header",{className:"mb-8 max-w-7xl mx-auto",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Seleccionar Proyecto"})}),e.jsx("div",{className:"max-w-7xl mx-auto text-center text-red-500 py-16 bg-white rounded-lg shadow-md",children:i})]}):e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 bg-gray-50 min-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Seleccionar Proyecto"}),e.jsx("p",{className:"text-md text-gray-600 mt-1",children:"Elige un proyecto para ver el detalle de sus tareas."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(a=>e.jsxs("div",{className:"group flex items-center justify-between gap-4 bg-white p-5 rounded-xl shadow-md border border-gray-200 transition-all duration-300 hover:shadow-lg hover:border-blue-400 hover:-translate-y-1",children:[e.jsxs("a",{href:`/ProjectTaskModal/${a.id}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 flex-grow truncate cursor-pointer",title:`Abrir ${a.name}`,children:[e.jsx(F,{className:"w-8 h-8 text-blue-500 flex-shrink-0 transition-transform duration-300 group-hover:scale-110"}),e.jsx("span",{className:"font-semibold text-lg text-gray-800 truncate",children:a.name})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("button",{onClick:()=>n(a),className:"p-2 text-gray-400 rounded-full transition-colors duration-200 hover:bg-gray-200 hover:text-gray-700",title:`Configurar ${a.name}`,children:e.jsx(I,{className:"w-5 h-5"})})})]},a.id))}),g.length===0&&!l&&e.jsx("div",{className:"mt-8 bg-white rounded-xl shadow-md border border-gray-200 p-12 text-center text-gray-500",children:e.jsx("p",{children:"No se encontraron proyectos."})})]}),u&&e.jsx(T,{proyecto:u,onClose:b,onProjectUpdated:h})]})};export{G as default};
//# sourceMappingURL=PreModalProjects-DzFH8C0i.js.map
