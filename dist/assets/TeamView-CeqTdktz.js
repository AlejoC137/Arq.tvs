import{j as e}from"./vendor-ui-BuaZYnYi.js";import{a as o}from"./vendor-react-C8ngQyMK.js";import{u as v}from"./vendor-charts-CQgSfZ3A.js";import{b as w,f as k,e as S,U as x}from"./index-BMF47wD1.js";import{B as g,C,a as T}from"./clock-LhWiBWuD.js";import"./vendor-pdf-Dysq3M1X.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=w("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),$=()=>{const d=v(),[c,p]=o.useState([]),[i,f]=o.useState([]),[m,h]=o.useState(!0),[j,b]=o.useState({});o.useEffect(()=>{N()},[d]);const N=async()=>{h(!0);try{const[s,t]=await Promise.all([d(k()),d(S())]);if(console.log("ðŸ“Š Staff Result:",s),console.log("ðŸ“Š Tasks Result:",t),s.success){const l=s.data||[];console.log("ðŸ‘¥ Staff loaded:",l.length,"members"),console.log("ðŸ‘¥ Staff data:",l),p(l)}else console.error("âŒ Error loading staff:",s.error);if(t.success){const l=t.data||[];console.log("ðŸ“‹ Tasks loaded:",l.length,"tasks"),console.log("ðŸ“‹ Sample task:",l[0]),f(l),y(s.data||[],l)}else console.error("âŒ Error loading tasks:",t.error)}catch(s){console.error("âŒ Error loading team data:",s)}finally{h(!1)}},y=(s,t)=>{console.log("ðŸ“ˆ Calculating stats..."),console.log("ðŸ‘¥ Staff count:",s.length),console.log("ðŸ“‹ Tasks count:",t.length);const l={};s.forEach(n=>{const r=t.filter(a=>a.staff_id===n.id||a.Staff_id===n.id||a.staffId===n.id);console.log(`ðŸ‘¤ ${n.name} (${n.id}): ${r.length} tasks`),l[n.id]={total:r.length,pending:r.filter(a=>a.status==="Pendiente").length,inProgress:r.filter(a=>a.status==="En Progreso"||a.status==="En DiseÃ±o").length,completed:r.filter(a=>a.status==="Completo").length,blocked:r.filter(a=>a.status==="Bloqueado").length,completionRate:r.length>0?Math.round(r.filter(a=>a.status==="Completo").length/r.length*100):0}}),console.log("ðŸ“‰ Stats calculated:",l),b(l)};return m?e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando equipo..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(x,{className:"w-8 h-8 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Equipo de Trabajo"})]}),e.jsx("p",{className:"text-gray-600",children:"GestiÃ³n de tareas por miembro del equipo"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Equipo"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:c.length})]}),e.jsx(x,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-orange-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tareas Totales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.length})]}),e.jsx(g,{className:"w-8 h-8 text-orange-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completadas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.filter(s=>s.status==="Completo").length})]}),e.jsx(C,{className:"w-8 h-8 text-green-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bloqueadas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:i.filter(s=>s.status==="Bloqueado").length})]}),e.jsx(u,{className:"w-8 h-8 text-red-500"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>{const t=j[s.id]||{total:0,pending:0,inProgress:0,completed:0,blocked:0,completionRate:0};return e.jsxs("a",{href:`/StaffTaskModal/${s.id}`,target:"_blank",rel:"noopener noreferrer",className:"block bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-blue-400 overflow-hidden group",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center text-blue-600 font-bold text-xl",children:s.name?s.name.charAt(0).toUpperCase():"?"}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsx("h3",{className:"font-bold text-lg truncate",children:s.name}),e.jsx("p",{className:"text-sm text-blue-100 truncate",children:s.role_description||"Sin rol asignado"})]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Progreso"}),e.jsxs("span",{className:"text-xs font-bold text-gray-800",children:[t.completionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${t.completionRate}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:t.total}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.completed}),e.jsx("p",{className:"text-xs text-gray-600",children:"Completas"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[t.pending>0&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),t.pending," Pendiente",t.pending>1?"s":""]}),t.inProgress>0&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),t.inProgress," En Curso"]}),t.blocked>0&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),t.blocked," Bloqueada",t.blocked>1?"s":""]})]})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-2 text-center group-hover:bg-blue-50 transition-colors",children:e.jsx("p",{className:"text-sm text-gray-600 group-hover:text-blue-600 font-medium",children:"Click para ver tareas â†’"})})]},s.id)})}),c.length===0&&!m&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(x,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"No hay miembros del equipo"}),e.jsx("p",{className:"text-gray-500",children:"Agrega miembros para comenzar a gestionar tareas"})]})]})})};export{$ as default};
